# TAREFA-011: AGENTE PERITO M√âDICO

**Status:** ‚úÖ CONCLU√çDA  
**Data de Conclus√£o:** 2025-10-23  
**Respons√°vel:** IA (GitHub Copilot)  
**Depend√™ncias:** TAREFA-010 (Agente Advogado Coordenador)  
**Pr√≥xima Tarefa:** TAREFA-012 (Agente Perito Seguran√ßa do Trabalho)

---

## üìã DESCRI√á√ÉO DA TAREFA

Implementar o Agente Perito M√©dico, um especialista em an√°lises m√©dicas periciais para processos jur√≠dicos. Este agente analisa documentos m√©dicos (laudos, exames, prontu√°rios) sob a perspectiva de um perito m√©dico, focando em diagn√≥sticos, nexo causal, incapacidades e danos corporais.

---

## üéØ OBJETIVOS

### Objetivo Principal
Criar um agente especializado em an√°lises m√©dicas que possa ser chamado pelo Agente Advogado Coordenador para fornecer pareceres t√©cnicos m√©dicos em processos trabalhistas, previdenci√°rios e c√≠veis.

### Objetivos Espec√≠ficos
- ‚úÖ Implementar classe AgentePeritoMedico herdando de AgenteBase
- ‚úÖ Criar template de prompt especializado em an√°lise m√©dica pericial
- ‚úÖ Implementar m√©todo gerar_parecer() para gera√ß√£o de pareceres t√©cnicos
- ‚úÖ Implementar m√©todo analisar_nexo_causal() especializado
- ‚úÖ Implementar m√©todo avaliar_incapacidade() especializado
- ‚úÖ Integrar com o Agente Advogado Coordenador via registro autom√°tico
- ‚úÖ Documenta√ß√£o exaustiva seguindo padr√µes do projeto
- ‚úÖ Exemplo de uso funcional no __main__

---

## üìÅ ARQUIVOS CRIADOS/MODIFICADOS

### 1. `backend/src/agentes/agente_perito_medico.py` (CRIADO)
**Linhas de c√≥digo:** ~850  
**Responsabilidade:** An√°lise m√©dica pericial especializada

---

## üèóÔ∏è ARQUITETURA DA SOLU√á√ÉO

### Estrutura da Classe AgentePeritoMedico

```
AgenteBase (abstrata)
    ‚îî‚îÄ‚îÄ AgentePeritoMedico
            ‚îú‚îÄ‚îÄ __init__()                    # Configura√ß√£o do agente
            ‚îú‚îÄ‚îÄ montar_prompt()               # Template de prompt m√©dico
            ‚îú‚îÄ‚îÄ gerar_parecer()               # M√©todo de conveni√™ncia
            ‚îú‚îÄ‚îÄ analisar_nexo_causal()        # An√°lise especializada
            ‚îú‚îÄ‚îÄ avaliar_incapacidade()        # An√°lise especializada
            ‚îî‚îÄ‚îÄ _formatar_documentos()        # Auxiliar privado
```

### Fluxo de An√°lise M√©dica

```
Usu√°rio (via Advogado)
    ‚Üì
AgenteAdvogadoCoordenador.delegar_para_peritos()
    ‚Üì
AgentePeritoMedico.processar() ou .gerar_parecer()
    ‚Üì
    1. montar_prompt() - Template m√©dico especializado
    ‚Üì
    2. GerenciadorLLM.chamar_llm() - GPT-4 (temperatura 0.2)
    ‚Üì
    3. Formata√ß√£o da resposta estruturada
    ‚Üì
Retorno: Parecer m√©dico t√©cnico + confian√ßa + metadados
```

---

## üîß IMPLEMENTA√á√ÉO DETALHADA

### 1. Configura√ß√£o do Agente (\_\_init\_\_)

**Caracter√≠sticas configuradas:**
- **Nome:** "Perito M√©dico"
- **Modelo LLM:** GPT-4 (an√°lises t√©cnicas complexas)
- **Temperatura:** 0.2 (baixa - an√°lises m√©dicas devem ser objetivas e consistentes)
- **√Åreas de especialidade:** 8 especialidades m√©dicas documentadas

**Justificativa da temperatura 0.2:**
An√°lises m√©dicas periciais devem ser:
- Objetivas e reprodut√≠veis
- Baseadas em evid√™ncias documentais
- Consistentes entre m√∫ltiplas execu√ß√µes
- Minimamente criativas (n√£o queremos "inventividade" em laudos m√©dicos)

Temperaturas baixas (0.0-0.3) reduzem aleatoriedade e aumentam determinismo.

---

### 2. Template de Prompt M√©dico (montar_prompt)

**Estrutura do prompt criado:**

1. **Defini√ß√£o de papel:**
   - "Voc√™ √© um PERITO M√âDICO altamente qualificado..."
   - Especializa√ß√£o em Medicina do Trabalho e Medicina Legal

2. **Diretrizes de an√°lise:**
   - T√âCNICA: Terminologia m√©dica apropriada (CIDs, nomenclatura anat√¥mica)
   - OBJETIVA: Baseada exclusivamente em evid√™ncias documentais
   - FUNDAMENTADA: Citar documentos e trechos que embasam conclus√µes
   - ESTRUTURADA: Formato de parecer pericial padr√£o
   - PRUDENTE: Indicar grau de certeza (certeza absoluta, prov√°vel, poss√≠vel, improv√°vel)

3. **Documentos fornecidos:**
   - Formatados com numera√ß√£o [DOCUMENTO 1], [DOCUMENTO 2], etc.
   - Facilita refer√™ncia espec√≠fica no parecer

4. **Metadados do processo:**
   - Tipo de processo (trabalhista, previdenci√°rio, c√≠vel)
   - Especialidade m√©dica requerida (se especificada)

5. **Quest√£o pericial:**
   - Pergunta espec√≠fica do usu√°rio

6. **Instru√ß√µes detalhadas:**
   - Identifica√ß√£o de diagn√≥sticos (com CIDs)
   - An√°lise de nexo causal (metodologia e categorias)
   - Avalia√ß√£o de incapacidade (classifica√ß√µes)
   - Identifica√ß√£o de sequelas e danos corporais
   - An√°lise cr√≠tica dos laudos
   - Sugest√£o de exames complementares

7. **Formato esperado do parecer:**
   ```
   1. RESUMO DOS DOCUMENTOS ANALISADOS
   2. DIAGN√ìSTICOS IDENTIFICADOS (com CIDs)
   3. AN√ÅLISE T√âCNICA
   4. NEXO CAUSAL (se aplic√°vel)
   5. INCAPACIDADE LABORAL (se aplic√°vel)
   6. SEQUELAS E DANOS CORPORAIS
   7. CONCLUS√ÉO
   8. DOCUMENTOS CITADOS
   ```

**Diferenciais do prompt:**
- ‚úÖ Extremamente estruturado (guia o LLM passo a passo)
- ‚úÖ Categorias claras de nexo causal (ESTABELECIDO, PROV√ÅVEL, POSS√çVEL, IMPROV√ÅVEL, INEXISTENTE)
- ‚úÖ Classifica√ß√µes padronizadas de incapacidade (TEMPOR√ÅRIA/PERMANENTE, PARCIAL/TOTAL)
- ‚úÖ √änfase em fundamenta√ß√£o documental (evita "inven√ß√µes")
- ‚úÖ Solicita CIDs e terminologia m√©dica apropriada
- ‚úÖ Instrui sobre grau de certeza nas conclus√µes

---

### 3. M√©todo gerar_parecer()

**Objetivo:**  
Alias sem√¢ntico do m√©todo `processar()` herdado de AgenteBase.

**Justificativa:**  
Melhora legibilidade do c√≥digo quando usado especificamente com AgentePeritoMedico.

```python
# Menos sem√¢ntico:
resultado = perito_medico.processar(...)

# Mais sem√¢ntico (dom√≠nio m√©dico):
resultado = perito_medico.gerar_parecer(...)
```

**Implementa√ß√£o:**
Simples delega√ß√£o para `self.processar()` - toda a l√≥gica j√° est√° na classe base.

---

### 4. M√©todo analisar_nexo_causal()

**Contexto de neg√≥cio:**  
Nexo causal √© um dos pontos mais cr√≠ticos em processos trabalhistas e previdenci√°rios. Determinar se uma doen√ßa foi causada ou agravada pelo trabalho √© fundamental para reconhecimento de doen√ßa ocupacional.

**Par√¢metros especializados:**
- `doenca_ou_lesao`: Nome da doen√ßa/les√£o investigada (ex: "LER/DORT")
- `atividade_laboral`: Descri√ß√£o do trabalho (ex: "Digita√ß√£o cont√≠nua 8h/dia")

**Metodologia implementada:**
1. Monta pergunta espec√≠fica focada em nexo causal
2. Solicita categoriza√ß√£o: ESTABELECIDO, PROV√ÅVEL, POSS√çVEL, IMPROV√ÅVEL, INEXISTENTE
3. Enriquece metadados com contexto de nexo causal
4. Delega para `processar()` com prompt especializado

**Exemplo de uso:**
```python
perito = AgentePeritoMedico()

resultado = perito.analisar_nexo_causal(
    contexto_de_documentos=[laudo_medico, exames],
    doenca_ou_lesao="LER/DORT - Tenossinovite de De Quervain (CID M65.4)",
    atividade_laboral="Operadora de caixa - digita√ß√£o cont√≠nua 8h/dia"
)

print(resultado["parecer"])  # An√°lise focada em nexo causal
```

---

### 5. M√©todo avaliar_incapacidade()

**Contexto de neg√≥cio:**  
Determina√ß√£o de incapacidade laboral √© crucial em processos previdenci√°rios (aux√≠lio-doen√ßa, aposentadoria por invalidez) e trabalhistas (estabilidade acident√°ria).

**Classifica√ß√µes implementadas:**

**Dura√ß√£o:**
- TEMPOR√ÅRIA: Recupera√ß√£o esperada (retorno ao trabalho)
- PERMANENTE: Condi√ß√£o irrevers√≠vel

**Extens√£o:**
- TOTAL: Impossibilidade de exercer qualquer atividade
- PARCIAL: Limita√ß√£o para algumas atividades

**An√°lise inclu√≠da:**
- Diagn√≥sticos que fundamentam incapacidade
- Limita√ß√µes funcionais espec√≠ficas
- Estimativa de tempo de afastamento (se tempor√°ria)
- Percentual de redu√ß√£o de capacidade (se parcial)
- Necessidade de reabilita√ß√£o profissional
- Possibilidade de readapta√ß√£o funcional

**Exemplo de uso:**
```python
perito = AgentePeritoMedico()

resultado = perito.avaliar_incapacidade(
    contexto_de_documentos=[laudos, exames],
    metadados_adicionais={
        "funcao_laboral": "Motorista de caminh√£o",
        "atividades": "Dirigir 10h/dia, carregar/descarregar cargas"
    }
)

print(resultado["parecer"])  # Avalia√ß√£o de incapacidade
```

---

### 6. M√©todo Auxiliar _formatar_documentos_para_prompt()

**Objetivo:**  
Transformar lista de strings em se√ß√£o formatada e numerada para o prompt.

**Formata√ß√£o:**
```
[DOCUMENTO 1]
Laudo m√©dico: paciente apresenta...

[DOCUMENTO 2]
Exame de resson√¢ncia magn√©tica...
```

**Vantagens:**
- ‚úÖ Facilita refer√™ncia espec√≠fica no parecer ("Conforme DOCUMENTO 2...")
- ‚úÖ Organiza√ß√£o visual clara para o LLM
- ‚úÖ Permite rastreabilidade das fontes

---

### 7. Factory Function criar_perito_medico()

**Objetivo:**  
Centralizar cria√ß√£o do AgentePeritoMedico.

**Vantagens:**
- ‚úÖ Facilita inje√ß√£o de depend√™ncias futuras
- ‚úÖ Centraliza configura√ß√µes
- ‚úÖ Melhora testabilidade
- ‚úÖ Padr√£o consistente com criar_advogado_coordenador()

**Uso recomendado:**
```python
# Preferir:
perito = criar_perito_medico()

# Em vez de:
perito = AgentePeritoMedico()
```

---

### 8. Integra√ß√£o com Advogado Coordenador

**Modifica√ß√£o em:** `agente_advogado_coordenador.py`

**O que mudou:**
Atualizado `criar_advogado_coordenador()` para registrar automaticamente o perito m√©dico:

```python
def criar_advogado_coordenador() -> AgenteAdvogadoCoordenador:
    advogado = AgenteAdvogadoCoordenador()
    
    # NOVO: Registro autom√°tico do Perito M√©dico
    try:
        from backend.src.agentes.agente_perito_medico import AgentePeritoMedico
        advogado.registrar_perito("medico", AgentePeritoMedico)
        logger.info("‚úÖ Perito M√©dico registrado")
    except ImportError as erro:
        logger.warning(f"‚ö†Ô∏è  Perito M√©dico n√£o dispon√≠vel: {erro}")
    
    return advogado
```

**Benef√≠cios:**
- ‚úÖ Registro autom√°tico ao criar o advogado coordenador
- ‚úÖ Graceful degradation: se o perito m√©dico n√£o estiver dispon√≠vel, apenas loga warning
- ‚úÖ F√°cil expans√£o: pr√≥ximos peritos seguem mesmo padr√£o

**Como usar a integra√ß√£o:**
```python
# Criar advogado (perito m√©dico √© registrado automaticamente)
advogado = criar_advogado_coordenador()

# Verificar peritos dispon√≠veis
print(advogado.listar_peritos_disponiveis())  # ['medico']

# Delegar para perito m√©dico
pareceres = await advogado.delegar_para_peritos(
    pergunta="H√° nexo causal?",
    contexto_de_documentos=[...],
    peritos_selecionados=["medico"]
)

print(pareceres["medico"]["parecer"])  # Parecer do perito m√©dico
```

---

## üé® DECIS√ïES T√âCNICAS

### 1. Temperatura 0.2 (Muito Baixa)

**Decis√£o:** Usar temperatura 0.2 para an√°lises m√©dicas.

**Justificativa:**
- **Objetividade:** An√°lises m√©dicas periciais devem ser objetivas, n√£o criativas
- **Reprodutibilidade:** Mesmos documentos ‚Üí mesmas conclus√µes (essencial em processos judiciais)
- **Determinismo:** Reduz aleatoriedade do GPT-4
- **Fundamenta√ß√£o:** An√°lises devem estar baseadas em evid√™ncias, n√£o em "criatividade"

**Compara√ß√£o de temperaturas:**
- 0.0-0.3: Muito determin√≠stico (ideal para an√°lises t√©cnicas)
- 0.7: Padr√£o (equil√≠brio criatividade/consist√™ncia)
- 1.0+: Muito criativo (ideal para gera√ß√£o de conte√∫do art√≠stico)

**Trade-offs:**
- ‚úÖ Vantagem: Respostas consistentes e reprodut√≠veis
- ‚úÖ Vantagem: Reduz "alucina√ß√µes" do LLM
- ‚ö†Ô∏è  Desvantagem: Respostas podem ser menos "naturais" em linguagem
- ‚ö†Ô∏è  Desvantagem: Menos varia√ß√£o em casos lim√≠trofes

**Conclus√£o:** Para per√≠cias m√©dicas, objetividade > naturalidade de linguagem.

---

### 2. Categorias Expl√≠citas de Nexo Causal

**Decis√£o:** Definir categorias claras (ESTABELECIDO, PROV√ÅVEL, POSS√çVEL, IMPROV√ÅVEL, INEXISTENTE)

**Justificativa:**
- **Clareza jur√≠dica:** Processos jur√≠dicos requerem categorias bem definidas
- **Padroniza√ß√£o:** Facilita compara√ß√£o entre casos
- **Rastreabilidade:** Decis√µes s√£o mais audit√°veis
- **Orienta√ß√£o ao LLM:** Prompt expl√≠cito evita ambiguidades

**Alternativas consideradas:**
- ‚ùå **Percentuais num√©ricos:** Muito preciso (falsa precis√£o em an√°lises qualitativas)
- ‚ùå **Sim/N√£o bin√°rio:** Simplista demais, perde nuances m√©dicas
- ‚úÖ **Categorias qualitativas:** Equil√≠brio entre precis√£o e nuances

**Mapeamento com terminologia m√©dica:**
- ESTABELECIDO ‚âà "Certeza m√©dica" (>90% de certeza)
- PROV√ÅVEL ‚âà "Altamente prov√°vel" (70-90%)
- POSS√çVEL ‚âà "N√£o pode ser descartado" (40-70%)
- IMPROV√ÅVEL ‚âà "Pouco prov√°vel" (10-40%)
- INEXISTENTE ‚âà "Afastado" (<10%)

---

### 3. M√©todos Especializados vs M√©todo Gen√©rico

**Decis√£o:** Criar m√©todos especializados (analisar_nexo_causal, avaliar_incapacidade) al√©m do gen√©rico (processar)

**Justificativa:**

**Vantagens dos m√©todos especializados:**
- ‚úÖ **Sem√¢ntica:** `perito.analisar_nexo_causal()` √© mais leg√≠vel que `perito.processar()`
- ‚úÖ **Par√¢metros espec√≠ficos:** `doenca_ou_lesao` e `atividade_laboral` s√£o intuitivos
- ‚úÖ **Perguntas pr√©-formatadas:** Usu√°rio n√£o precisa formular a pergunta perfeita
- ‚úÖ **Metadados autom√°ticos:** Enriquece contexto automaticamente

**Trade-offs:**
- ‚úÖ Vantagem: Interface mais intuitiva para dom√≠nio m√©dico
- ‚úÖ Vantagem: Reduz erros de formula√ß√£o de perguntas
- ‚ö†Ô∏è  Desvantagem: Mais c√≥digo para manter
- ‚ö†Ô∏è  Desvantagem: N√£o cobre todos os casos poss√≠veis

**Solu√ß√£o:** Manter ambas as interfaces:
- **M√©todos especializados:** Para casos comuns (nexo causal, incapacidade)
- **M√©todo gen√©rico (processar):** Para casos n√£o cobertos

---

### 4. Formata√ß√£o de Documentos com Numera√ß√£o

**Decis√£o:** Formatar documentos como `[DOCUMENTO 1]`, `[DOCUMENTO 2]`, etc.

**Justificativa:**
- **Rastreabilidade:** Parecer pode citar "Conforme DOCUMENTO 2..."
- **Organiza√ß√£o visual:** LLM processa melhor informa√ß√£o estruturada
- **Auditabilidade:** F√°cil verificar fontes das conclus√µes

**Alternativas consideradas:**
- ‚ùå **Sem formata√ß√£o:** Dificulta rastreamento de fontes
- ‚ùå **Markdown complexo:** Pode confundir o LLM
- ‚úÖ **Numera√ß√£o simples:** Claro e eficaz

---

### 5. Graceful Degradation no Registro de Peritos

**Decis√£o:** Usar try/except ao registrar peritos em `criar_advogado_coordenador()`

**Justificativa:**
- **Resili√™ncia:** Sistema continua funcionando se um perito n√£o estiver dispon√≠vel
- **Desenvolvimento incremental:** Facilita desenvolvimento em fases
- **Debugging:** Logs de warning facilitam diagn√≥stico de problemas

**Implementa√ß√£o:**
```python
try:
    from backend.src.agentes.agente_perito_medico import AgentePeritoMedico
    advogado.registrar_perito("medico", AgentePeritoMedico)
    logger.info("‚úÖ Perito M√©dico registrado")
except ImportError as erro:
    logger.warning(f"‚ö†Ô∏è  Perito M√©dico n√£o dispon√≠vel: {erro}")
```

**Benef√≠cios:**
- ‚úÖ Sistema n√£o quebra se m√≥dulo faltar
- ‚úÖ Facilita testes unit√°rios
- ‚úÖ Permite desenvolvimento modular

---

## üìä EXEMPLO DE USO COMPLETO

### Cen√°rio: An√°lise de Nexo Causal em Processo Trabalhista

```python
from backend.src.agentes.agente_perito_medico import criar_perito_medico

# 1. Criar inst√¢ncia do perito m√©dico
perito = criar_perito_medico()

# 2. Documentos m√©dicos do processo
documentos = [
    """Laudo M√©dico - Dr. Jo√£o Silva (CRM 12345)
    Data: 15/10/2025
    Diagn√≥stico: LER/DORT - Tenossinovite de De Quervain (CID M65.4)
    Paciente trabalha como operadora de caixa h√° 5 anos, digita√ß√£o 8h/dia.
    Dor em punho direito h√° 6 meses, piora progressiva.
    Teste de Finkelstein positivo.
    """,
    
    """Resson√¢ncia Magn√©tica de Punho Direito
    Data: 10/10/2025
    Achados: Tenossinovite do primeiro compartimento extensor.
    Espessamento sinovial ao redor dos tend√µes.
    Edema peritendinoso.
    Conclus√£o: Tenossinovite de De Quervain.
    """
]

# 3. An√°lise de nexo causal
resultado = perito.analisar_nexo_causal(
    contexto_de_documentos=documentos,
    doenca_ou_lesao="LER/DORT - Tenossinovite de De Quervain (CID M65.4)",
    atividade_laboral="Operadora de caixa - digita√ß√£o cont√≠nua 8h/dia por 5 anos",
    metadados_adicionais={
        "tipo_processo": "Trabalhista",
        "tempo_de_exposicao": "5 anos"
    }
)

# 4. Resultado
print(f"Agente: {resultado['agente']}")
print(f"Confian√ßa: {resultado['confianca']:.2%}")
print(f"Timestamp: {resultado['timestamp']}")
print(f"\nParecer M√©dico:\n{resultado['parecer']}")
```

**Sa√≠da esperada (estruturada):**
```
Agente: Perito M√©dico
Confian√ßa: 85%
Timestamp: 2025-10-23T14:30:00

Parecer M√©dico:
**1. RESUMO DOS DOCUMENTOS ANALISADOS:**
- Laudo m√©dico do Dr. Jo√£o Silva (CRM 12345) de 15/10/2025
- Resson√¢ncia magn√©tica de punho direito de 10/10/2025

**2. DIAGN√ìSTICOS IDENTIFICADOS:**
- Tenossinovite de De Quervain (CID-10: M65.4)

**3. AN√ÅLISE T√âCNICA:**
Conforme DOCUMENTO 1, a paciente apresenta diagn√≥stico de LER/DORT...
[an√°lise detalhada]

**4. NEXO CAUSAL:**
ESTABELECIDO - H√° evid√™ncias robustas de nexo causal entre...
[fundamenta√ß√£o]

**5. CONCLUS√ÉO:**
H√° nexo causal ESTABELECIDO entre a doen√ßa ocupacional (Tenossinovite
de De Quervain) e a atividade laboral de operadora de caixa...

**6. DOCUMENTOS CITADOS:**
- DOCUMENTO 1: Laudo m√©dico com diagn√≥stico e anamnese ocupacional
- DOCUMENTO 2: Resson√¢ncia magn√©tica confirmando achados cl√≠nicos
```

---

## ‚úÖ VALIDA√á√ÉO

### Checklist de Implementa√ß√£o

**Arquitetura:**
- ‚úÖ Herda corretamente de AgenteBase
- ‚úÖ Implementa m√©todo abstrato montar_prompt()
- ‚úÖ Usa GerenciadorLLM para chamadas ao GPT-4
- ‚úÖ Segue padr√£o Template Method

**Funcionalidades Core:**
- ‚úÖ gerar_parecer() - alias sem√¢ntico
- ‚úÖ analisar_nexo_causal() - m√©todo especializado
- ‚úÖ avaliar_incapacidade() - m√©todo especializado
- ‚úÖ _formatar_documentos_para_prompt() - auxiliar privado

**Integra√ß√£o:**
- ‚úÖ Registrado em criar_advogado_coordenador()
- ‚úÖ Graceful degradation com try/except
- ‚úÖ Logging apropriado

**Documenta√ß√£o:**
- ‚úÖ Docstrings exaustivas em TODAS as fun√ß√µes
- ‚úÖ Coment√°rios explicando "porqu√™" e "como"
- ‚úÖ Exemplo de uso no __main__
- ‚úÖ Seguindo padr√µes do AI_MANUAL_DE_MANUTENCAO.md

**Nomenclatura:**
- ‚úÖ snake_case para fun√ß√µes e vari√°veis
- ‚úÖ PascalCase para classe
- ‚úÖ Nomes longos e descritivos (ex: analisar_nexo_causal)

**Qualidade de C√≥digo:**
- ‚úÖ Temperatura apropriada (0.2 para objetividade)
- ‚úÖ Modelo apropriado (GPT-4 para an√°lises t√©cnicas)
- ‚úÖ Valida√ß√µes de entrada
- ‚úÖ Tratamento de erros
- ‚úÖ Logging detalhado

---

## üìà M√âTRICAS

### C√≥digo
- **Linhas de c√≥digo:** ~850
- **Linhas de coment√°rios:** ~400 (47% do arquivo)
- **N√∫mero de m√©todos p√∫blicos:** 5
- **N√∫mero de m√©todos privados:** 1
- **Complexidade:** Baixa (fun√ß√µes focadas e pequenas)

### Documenta√ß√£o
- **Docstrings:** 100% cobertura
- **Coment√°rios inline:** Todos os blocos l√≥gicos complexos
- **Exemplos de uso:** 3 (em docstrings + __main__)

---

## üîÑ INTEGRA√á√ÉO COM O SISTEMA

### Como o Perito M√©dico √© Usado

**1. Registro Autom√°tico:**
```python
advogado = criar_advogado_coordenador()
# Perito m√©dico √© registrado automaticamente
```

**2. Listagem de Peritos:**
```python
peritos = advogado.listar_peritos_disponiveis()
# ['medico']
```

**3. Delega√ß√£o de An√°lise:**
```python
pareceres = await advogado.delegar_para_peritos(
    pergunta="H√° nexo causal entre doen√ßa e trabalho?",
    contexto_de_documentos=[...],
    peritos_selecionados=["medico"]
)
```

**4. Compila√ß√£o de Resposta Final:**
```python
resposta_final = advogado.compilar_resposta(
    pareceres_peritos=pareceres,
    contexto_rag=[...],
    pergunta_original="..."
)
```

---

## üéØ PR√ìXIMOS PASSOS

### TAREFA-012: Agente Perito Seguran√ßa do Trabalho
Seguir padr√£o id√™ntico ao Perito M√©dico:
- Herdar de AgenteBase
- Temperatura 0.2 (objetividade)
- Template de prompt especializado em NRs, EPIs, condi√ß√µes de trabalho
- M√©todos especializados (ex: analisar_conformidade_nrs)
- Registro em criar_advogado_coordenador()

### TAREFA-013: Orquestrador Multi-Agent
Com os peritos implementados, criar orquestrador que:
- Gerencia estado da consulta
- Coordena fluxo completo: RAG ‚Üí Delega√ß√£o ‚Üí Compila√ß√£o
- Tratamento de erros em qualquer agente
- Timeout por agente

---

## üìù NOTAS IMPORTANTES

### Para Futuras IAs que Trabalhar√£o Neste C√≥digo

1. **Temperatura 0.2 √© intencional:** N√£o aumentar sem justificativa forte. An√°lises m√©dicas devem ser objetivas.

2. **Categorias de nexo causal:** S√£o baseadas em pr√°ticas m√©dicas periciais reais. N√£o modificar sem consultar literatura m√©dica.

3. **M√©todos especializados:** Se criar novos (ex: avaliar_sequelas), seguir mesmo padr√£o:
   - Par√¢metros espec√≠ficos do dom√≠nio
   - Pergunta pr√©-formatada
   - Enriquecimento de metadados
   - Delega√ß√£o para processar()

4. **Formato de resposta:** O prompt solicita estrutura espec√≠fica. Se GPT-4 n√£o estiver seguindo, ajustar instru√ß√µes no prompt, n√£o diminuir temperatura.

5. **Integra√ß√£o com coordenador:** O padr√£o try/except em criar_advogado_coordenador() deve ser mantido para permitir graceful degradation.

---

## üîó REFER√äNCIAS

### Arquivos Relacionados
- `backend/src/agentes/agente_base.py` - Classe base
- `backend/src/agentes/agente_advogado_coordenador.py` - Coordenador
- `backend/src/utilitarios/gerenciador_llm.py` - Interface com OpenAI
- `AI_MANUAL_DE_MANUTENCAO.md` - Padr√µes do projeto
- `ARQUITETURA.md` - Vis√£o geral da arquitetura

### Documenta√ß√£o de Refer√™ncia
- OpenAI API Documentation (temperature parameter)
- Medicina do Trabalho - Nexo Causal (NR-7, Portaria 1339/1999)
- CID-10 - Classifica√ß√£o Internacional de Doen√ßas

---

**Changelog criado em:** 2025-10-23  
**Vers√£o:** 1.0.0  
**Autor:** IA (GitHub Copilot)
